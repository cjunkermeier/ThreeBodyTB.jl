<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Functions · ThreeBodyTB.jl Documentation</title><meta name="title" content="Functions · ThreeBodyTB.jl Documentation"/><meta property="og:title" content="Functions · ThreeBodyTB.jl Documentation"/><meta property="twitter:title" content="Functions · ThreeBodyTB.jl Documentation"/><meta name="description" content="Documentation for ThreeBodyTB.jl Documentation."/><meta property="og:description" content="Documentation for ThreeBodyTB.jl Documentation."/><meta property="twitter:description" content="Documentation for ThreeBodyTB.jl Documentation."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../assets/nist-combined.css" rel="stylesheet" type="text/css"/>      <link rel="stylesheet" href="../assets/nist-combined.css"> <script src="../assets/jquery-1.9.0.min.js" type="text/javascript" defer="defer"></script><script src="../assets/nist-header-footer.js" type="text/javascript" defer="defer"></script><script async type="text/javascript" id="_fed_an_ua_tag" src="https://dap.digitalgov.gov/Universal-Federated-Analytics-Min.js?agency=NIST&subagency=github&pua=UA-66610693-1&yt=true&exts=ppsx,pps,f90,sch,rtf,wrl,txz,m1v,xlsm,msi,xsd,f,tif,eps,mpg,xml,pl,xlt,c"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="ThreeBodyTB.jl Documentation logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">ThreeBodyTB.jl Documentation</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="../ug_run/">Running Calculations</a></li><li><a class="tocitem" href="../ug_fit/">Fit Coefficients</a></li></ul></li><li><span class="tocitem">Core User Interface</span><ul><li><a class="tocitem" href="../structs/">Structs</a></li><li class="is-active"><a class="tocitem" href>Functions</a><ul class="internal"><li><a class="tocitem" href="#Crystal-/-Energy"><span>Crystal / Energy</span></a></li><li><a class="tocitem" href="#Plotting"><span>Plotting</span></a></li><li><a class="tocitem" href="#Utility"><span>Utility</span></a></li></ul></li></ul></li><li><a class="tocitem" href="../compile/">Compile/Python</a></li><li><a class="tocitem" href="../every/">Additional Docstrings</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Core User Interface</a></li><li class="is-active"><a href>Functions</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Functions</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/usnistgov/ThreeBodyTB.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/master/docs/src/core.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="User-Functions"><a class="docs-heading-anchor" href="#User-Functions">User Functions</a><a id="User-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#User-Functions" title="Permalink"></a></h1><p>All of these functions are exported from ThreeBodyTB for your convenience.</p><h2 id="Crystal-/-Energy"><a class="docs-heading-anchor" href="#Crystal-/-Energy">Crystal / Energy</a><a id="Crystal-/-Energy-1"></a><a class="docs-heading-anchor-permalink" href="#Crystal-/-Energy" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreeBodyTB.CrystalMod.makecrys" href="#ThreeBodyTB.CrystalMod.makecrys"><code>ThreeBodyTB.CrystalMod.makecrys</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">makecrys(A,coords,types; units=missing)</code></pre><p>Return a crystal object from 3×3 lattice, nat × 3 coords in crystal units, and nat element strings.</p><p>Will use units set by <code>set_units</code>, with default to Ang. Can override with <code>units</code>.</p><p>Note: also export-ed directly from ThreeBodyTB for convenience</p><pre><code class="language-julia-repl hljs">julia&gt; makecrys([10.0 0 0; 0 10.0 0; 0 0 10.0], [0.0 0.0 0.0], [&quot;H&quot;])
A1=     10.00000  0.00000  0.00000
A2=     0.00000  10.00000  0.00000
A3=     0.00000  0.00000  10.00000

H    0.00000  0.00000  0.00000</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/Crystal.jl#L269-L287">source</a></section><section><div><pre><code class="language-julia hljs">makecrys(filename::String)</code></pre><p>Read filename, return crystal object. File can be POSCAR, or simple quantum espresso inputfile</p><p>The entire file can be in the string instead of the filename. The code decides which is which by looking for newlines&quot;</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/Crystal.jl#L458-L465">source</a></section><section><div><pre><code class="language-julia hljs">makecrys(lines::Array{String,1})</code></pre><p>Read string array, return crystal object. string array can be POSCAR, or simple quantum espresso inputfile</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/Crystal.jl#L490-L495">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreeBodyTB.scf_energy" href="#ThreeBodyTB.scf_energy"><code>ThreeBodyTB.scf_energy</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">scf_energy(c::crystal)</code></pre><p>Calculate energy, force, and stress for a crystal. Does self-consistent-field (SCF) calculation if using self-consistent electrostatics.</p><p>returns energy, tight-binding-crystal-object, error-flag</p><p><strong>Arguments</strong></p><ul><li><code>c::crystal</code>: the structure to calculate on. Only required argument.</li><li><code>database=missing</code>: Source of coeficients. Will be loaded from pre-fit coefficients if missing.</li><li><code>smearing=0.01</code>: Gaussian smearing temperature, in Ryd. Usually can leave as default.</li><li><code>grid=missing</code>: k-point grid, e.g. [10,10,10], default chosen automatically</li><li><code>conv_thr = 1e-5</code>: SCF convergence threshold (Ryd).</li><li><code>sparse = :auto</code>: Default is to use dense matricies for <code>nat &lt; 100</code>. Can be <code>true</code> or <code>false</code> to force choice.</li><li><code>iter = 75</code>: number of iterations before switch to more conservative settings.</li><li><code>mix = -1.0</code>: initial mixing. -1.0 means use default mixing. Will automagically adjust mixing if SCF is failing to converge. Starting default is smaller for larger unit cells.</li><li><code>mixing_mode = :simple</code>: default is simple. Other options are <code>:simple</code> and <code>:DIIS</code> / <code>:pulay</code> (direct inversion of iterative subspace). Will automatically switch to simple if Pulay fails. </li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/ThreeBodyTB.jl#L530-L547">source</a></section><section><div><pre><code class="language-julia hljs">scf_energy(d::dftout)

SCF energy using crystal structure from DFT object.</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/ThreeBodyTB.jl#L598-L602">source</a></section><section><div><pre><code class="language-julia hljs">scf_energy(tbc::tb_crys)</code></pre><p>SCF energy using crystal structure from TBC object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/ThreeBodyTB.jl#L615-L619">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreeBodyTB.scf_energy_force_stress" href="#ThreeBodyTB.scf_energy_force_stress"><code>ThreeBodyTB.scf_energy_force_stress</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">scf_energy_force_stress(c::crystal; database = missing, smearing = 0.01, grid = missing)</code></pre><p>Calculate energy, force, and stress for a crystal.</p><p><code>return energy, force, stress, tight_binding_crystal_object</code></p><p><strong>Arguments</strong></p><ul><li><code>c::crystal</code>: the structure to calculate on. Only required argument.</li><li><code>database=missing</code>: Source of coeficients. Will be loaded from pre-fit coefficients if missing.</li><li><code>smearing=0.01</code>: Gaussian smearing temperature, in Ryd. Usually can leave as default.</li><li><code>grid=missing</code>: k-point grid, e.g. [10,10,10], default chosen automatically</li><li><code>sparse = :auto</code>: Default is to use dense matricies for <code>nat &lt; 100</code>. Can be <code>true</code> or <code>false</code> to force choice.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/ThreeBodyTB.jl#L362-L376">source</a></section><section><div><pre><code class="language-julia hljs">scf_energy_force_stress(tbc::tb_crys; database = missing, smearing = 0.01, grid = missing)</code></pre><p>Calculate energy, force, and stress for a tight binding crystal object. This allows the calculation to run without re-doing the SCF calculation. Assumes SCF already done!</p><p>returns energy, force, stress, tight<em>binding</em>crystal_object</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/ThreeBodyTB.jl#L466-L475">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreeBodyTB.relax_structure" href="#ThreeBodyTB.relax_structure"><code>ThreeBodyTB.relax_structure</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">relax_structure(c::crystal; mode=&quot;vc-relax&quot;)</code></pre><p>Find the lowest energy atomic configuration of crystal <code>c</code>.</p><p><strong>Arguments</strong></p><ul><li><code>c::crystal</code>: the structure to relax, only required argument</li><li><code>mode=&quot;vc-relax&quot;</code>: Default (variable-cell relax) will relax structure and cell, anything else will relax structure only.</li><li><code>database=missing</code>: coefficent database, default is to use the pre-fit pbesol database</li><li><code>smearing=0.01</code>: smearing temperature (ryd), default = 0.01</li><li><code>grid=missing</code>: k-point grid, e.g. [10,10,10], default chosen automatically</li><li><code>nsteps=100</code>: maximum iterations</li><li><code>update_grid=true</code>: update automatic k-point grid during relaxation</li><li><code>conv_thr = 2e-3</code>: Convergence threshold for gradient</li><li><code>energy_conv_thr = 2e-4</code>: Convergence threshold for energy in Ryd</li><li><code>sparse = :auto</code>: Default is to use dense matricies for <code>nat &lt; 100</code>. Can be <code>true</code> or <code>false</code> to force choice.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/ThreeBodyTB.jl#L273-L289">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreeBodyTB.TB.read_tb_crys" href="#ThreeBodyTB.TB.read_tb_crys"><code>ThreeBodyTB.TB.read_tb_crys</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function read_tb_crys(filename, tbc::tb_crys)</code></pre><p>Reads and returns from <code>filename</code> a <code>tb_crys</code> object. See <code>write_tb_crys</code></p><p>If cannot find <code>&quot;filename&quot;</code>, will look for <code>&quot;filename.xml&quot;</code>, <code>&quot;filename.gz&quot;</code>, <code>&quot;filename.xml.gz&quot;</code></p><p>Can read gzipped files directly.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/TB.jl#L340-L349">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreeBodyTB.TB.write_tb_crys" href="#ThreeBodyTB.TB.write_tb_crys"><code>ThreeBodyTB.TB.write_tb_crys</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function write_tb_crys(filename, tbc::tb_crys)</code></pre><p>Writes to <code>filename</code> a <code>tb_crys</code> object, using xml formatting. See <code>read_tb_crys</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/TB.jl#L784-L789">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreeBodyTB.Symmetry.get_symmetry" href="#ThreeBodyTB.Symmetry.get_symmetry"><code>ThreeBodyTB.Symmetry.get_symmetry</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function get_symmetry(c::crystal; verbose=true, sym_prec = 5e-4, magmoms=missing)</code></pre><p>Return space group number, print other symmetry information if <code>verbose=true</code>. Based on Spglib.jl</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/Symmetry.jl#L263-L267">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreeBodyTB.Symmetry.get_standard_crys" href="#ThreeBodyTB.Symmetry.get_standard_crys"><code>ThreeBodyTB.Symmetry.get_standard_crys</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function get_standard_crys(c::crystal; sym_prec = 5e-4, magmoms=missing, to_primitive=true)</code></pre><p>Return standardized crystal structure, per spglib convention. Check if space-group is correct.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/Symmetry.jl#L320-L324">source</a></section></article><h2 id="Plotting"><a class="docs-heading-anchor" href="#Plotting">Plotting</a><a id="Plotting-1"></a><a class="docs-heading-anchor-permalink" href="#Plotting" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreeBodyTB.BandStruct.plot_bandstr" href="#ThreeBodyTB.BandStruct.plot_bandstr"><code>ThreeBodyTB.BandStruct.plot_bandstr</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function plot_bandstr(h::tb_crys; kpath, names = missing, proj_types=missing, proj_orbs = missing, proj_nums=missing)</code></pre><p>Plot the band structure of a <code>tb_crys</code> object. Can also perform a projected band structure if you specify at least one of <code>proj_types</code>, <code>proj_orbs</code>, <code>proj_nums</code>.</p><p>k-path specified by a kpath array and names.</p><p>Must do scf calculation before plotting.</p><p><strong>Arguments</strong></p><ul><li><code>h::tb_crys</code> - The tight-biding object we want to plot bands from. Only required argument.</li><li><code>kpath=[0.5 0 0 ; 0 0 0; 0.5 0.5 0.5; 0 0.5 0.5; 0 0 0 ;0 0 0.5]</code> - <code>nk</code> × 3 array k-point path (high symmetry points).</li><li><code>npts=30,</code> - number of points between high-symmetry k-points.</li><li><code>names=missing</code> - <code>nk</code> string array. Names of the high-symmetry k-points </li><li><code>proj_types=missing</code> - types to project onto. Either <code>proj_types=&quot;H&quot;</code> or <code>proj_types=[&quot;H&quot;, &quot;O&quot;]</code> are valid.</li><li><code>proj_orbs=missing</code> - orbitals to project onto. either <code>proj_orbs=:s</code> or <code>proj_orbs=[:s, :p]</code>.</li><li><code>proj_nums=missing</code> - atom numbers to project onto. Either <code>proj_nums=1</code> or <code>proj_nums=[1, 2]</code></li><li><code>efermi=missing</code> - allows you to specify fermi energy. Default is to take from <code>h</code></li><li><code>color=&quot;blue&quot;</code> - specify line color</li><li><code>MarkerSize=missing&quot;</code> - specify markersize</li><li><code>yrange=missing&quot;</code> - specify y-range. e.g. <code>yrange=[-0.7, 0.3]</code></li><li><code>plot_hk=false</code> - plot things besides the normal band structure. Can be one of <code>:Seig, :Heig, :Hreal, :Himag, :Sreal, :Simag</code> to plot H or S eigvals or components. Primarily for debugging.</li><li><code>align=&quot;vbm&quot;</code> - default or <code>&quot;valence&quot;</code> is to align valence band max to zero energy. Can also be <code>&quot;min&quot;</code>, which aligns on the minimum eigenvalue, or <code>&quot;fermi&quot;</code> or <code>&quot;ef&quot;</code>, which align on the Fermi level, </li><li><code>clear_pervious=true</code> - clears the plot before adding new stuff.</li><li><code>do_display=true</code> - display the plot. If <code>false</code>, can be used with display-less nodes. You can still use <code>savefig</code> from <code>Plots</code> to produce saved images.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/BandStruct.jl#L113-L138">source</a></section><section><div><pre><code class="language-julia hljs">function plot_bandstr(h::tb)</code></pre><p>Plots using <code>tb</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/BandStruct.jl#L469-L473">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreeBodyTB.BandStruct.plot_bandstr_sym" href="#ThreeBodyTB.BandStruct.plot_bandstr_sym"><code>ThreeBodyTB.BandStruct.plot_bandstr_sym</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function plot_bandstr_sym(c::crystal; sym_prec = 5e-4, npts=30, efermi = missing, color=&quot;blue&quot;, MarkerSize=missing, yrange=missing, plot_hk=false, align = &quot;vbm&quot;, proj_types = missing, proj_orbs = missing, proj_nums=missing, clear_previous=true, do_display=true, color_spin = [&quot;green&quot;, &quot;orange&quot;], spin = :both, nspin = 1, database=missing)</code></pre><p>Plots the band structure using a set of K-points determined by the space group. Will standardize the crystal structure and run the SCF  calculation automatically. Conventions similar to Setyawan and Curtarolo CMS 2010 as well as the jarvis-tools package. Other options similar to <code>plot_bandstr</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/BandStruct.jl#L174-L181">source</a></section><section><div><pre><code class="language-julia hljs">function plot_bandstr_sym(tbc::tb_crys;  sym_prec = 5e-4, npts=30, efermi = missing, color=&quot;blue&quot;, MarkerSize=missing, yrange=missing, plot_hk=false, align = &quot;vbm&quot;, proj_types = missing, proj_orbs = missing, proj_nums=missing, clear_previous=true, do_display=true, color_spin = [&quot;green&quot;, &quot;orange&quot;], spin = :both, nspin = 1, database=missing)</code></pre><p>Plots the band structure using a set of K-points determined by the space group. This version takes in a tight-binding crystal object from a pervious SCF calculation.  If the crystal is in the standardized unit cell, then it will not repeat the SCF calculation, but otherwise it will.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/BandStruct.jl#L218-L225">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreeBodyTB.BandStruct.plot_bandstr_dos" href="#ThreeBodyTB.BandStruct.plot_bandstr_dos"><code>ThreeBodyTB.BandStruct.plot_bandstr_dos</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function plot_bandstr_dos(c::crystal; sym_prec = 5e-4, npts=30, efermi = missing,color=&quot;blue&quot;, MarkerSize=missing,yrange=missing,plot_hk=false, align = &quot;fermi&quot;,  proj_types = missing, proj_orbs = missing, proj_nums=missing, clear_previous=true, do_display=true, color_spin = [&quot;green&quot;, &quot;orange&quot;],  spin = :both, nspin = 1, database=missing, smearing = 0.025)</code></pre><p>Run SCF in standardized crystal structure and calculate band structure along symmetry-derived k-lines, as well as the DOS. Then plot them layed out side-by-side.</p><p>See <code>plot_bandstr_sym</code> and <code>dos</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/BandStruct.jl#L267-L274">source</a></section><section><div><pre><code class="language-julia hljs">function plot_bandstr_dos(tbc::tb_crys)</code></pre><p>Plot symmetry-derived k-lines and DOS layout out together. This version takes in <code>tb_crys</code> object from a previous SCF calculation. Will need re-run SCF if <code>tbc.crys</code> is not standardized.</p><p>See <code>plot_bandstr_sym</code> and <code>dos</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/BandStruct.jl#L315-L324">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreeBodyTB.DOS.dos" href="#ThreeBodyTB.DOS.dos"><code>ThreeBodyTB.DOS.dos</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function dos(tbc::tb_crys; grid=missing, smearing=0.04, npts=missing, proj_type=missing, do_display=true)</code></pre><p>DOS, mostly for testing.</p><ul><li><code>npts</code> is number of energies</li><li><code>proj_type</code> can be <code>&quot;none&quot;</code>, <code>&quot;atomic&quot;</code>, or <code>&quot;orbital&quot;</code></li><li><code>do_display=false</code> will suppress the actual plot</li></ul><p>The combination of <code>smearing</code> and <code>grid</code> are important to get converged results.</p><p>See also <code>dos</code></p><p><code>return energies, dos, projected_dos, pdos_names</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/DOS.jl#L400-L414">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreeBodyTB.DOS.dos_realspace" href="#ThreeBodyTB.DOS.dos_realspace"><code>ThreeBodyTB.DOS.dos_realspace</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function dos_realspace(tbc; direction=3, grid=missing, smearing=0.005, npts=missing, do_display=true, use_sym=false, energy_grid=100, width=missing, energy_lims=missing, scissors_shift=0.0, scissors_shift_atoms=[])</code></pre><p>Makes an atom and spatially resoloved DOS-style plot. Along <code>direction=1,2,3</code> (lattice vector 1,2,3) the atoms are plotted, using transparancy to denote DOS amplitude. Try it out to see. Potentially useful for interfaces. Example usage: <code>c = makecrys([8.0 0 0; 0 8.0 0; 0 0 10.0], [0 0 0; 0 0 0.5], [:Li, :Cl]) #quasi 1D LiCl chain</code> <code>en, tbc, flag = scf_energy(c*[1,1,10])                                   #ten unit cells</code> <code>dos_realspace(tbc, direction=3)</code></p><p>Adjust the <code>energy_grid</code> and <code>width</code> to adjust plotting parameters. Scissors shift in energy unit to certain atoms will add scissors shift to open band gaps is desired.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/DOS.jl#L254-L265">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreeBodyTB.BandStruct.plot_compare_dft" href="#ThreeBodyTB.BandStruct.plot_compare_dft"><code>ThreeBodyTB.BandStruct.plot_compare_dft</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function plot_compare_dft(tbc, bs; tbc2=missing)</code></pre><p>Plots a band structure comparison between a tight-binding crystal object (<code>tb_crys</code>) and a band structure directly from dft (either a <code>dftout</code> or <code>bs</code> object). </p><p>The k-points are fixed by the <code>bs</code> object.</p><p><code>tbc2</code> is an optional second <code>tbc_crys</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/BandStruct.jl#L768-L777">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreeBodyTB.BandStruct.plot_compare_tb" href="#ThreeBodyTB.BandStruct.plot_compare_tb"><code>ThreeBodyTB.BandStruct.plot_compare_tb</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function plot_compare_tb(h1::tb_crys, h2::tb_crys; h3=missing)</code></pre><p>Plot a comparison between different tight binding objects <code>h1</code>, <code>h2</code>, and optionally <code>h3</code>. Options similar to <code>plot_bandstr</code> but more limited.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/BandStruct.jl#L67-L72">source</a></section><section><div><pre><code class="language-julia hljs">function plot_compare_tb(h1::tb, h2::tb; h3=missing)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/BandStruct.jl#L86-L88">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreeBodyTB.BandStruct.band_summary" href="#ThreeBodyTB.BandStruct.band_summary"><code>ThreeBodyTB.BandStruct.band_summary</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function band_summary(tbc, kgrid, fermi=missing)</code></pre><p>Produces summary of band structure. See below functions for more specific versions of function that automatically generate the k-points.</p><p>Note: gaps are not well-defined for non-magnetic systems with odd numbers of electrons, as they are required to be metals.</p><p>Returns <code>direct_gap, indirect_gap, gaptype, bandwidth</code></p><p>-<code>direct_gap</code>: minimum gap at one k-point between nominally filled and empty bands. Can be non-zero in metals.   -<code>indirect_gap</code>: LUMO - HOMO. Can be negative if material has a direct gap everywhere, but the conduction band at some k-point is below the valence band at a different k-point. Physically these are indirect gap semimetals.   -<code>gaptype</code> : is <code>:metal</code> for all metals, <code>:direct</code> or <code>:indirect</code> for insulators. -<code>bandwidth</code> : HOMO - minimum<em>band</em>energy. Included semicore states if they are in the TB calculation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/BandStruct.jl#L960-L976">source</a></section><section><div><pre><code class="language-julia hljs">function band_summary(tbc::tb_crys; kgrid=missing, kpts=missing)</code></pre><p>Will automatically generate standard k-grid by default.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/BandStruct.jl#L1071-L1075">source</a></section><section><div><pre><code class="language-julia hljs">function band_summary(tbc::tb_crys_kspace)</code></pre><p>Will use internal k-points by default.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/BandStruct.jl#L1088-L1092">source</a></section></article><h2 id="Utility"><a class="docs-heading-anchor" href="#Utility">Utility</a><a id="Utility-1"></a><a class="docs-heading-anchor-permalink" href="#Utility" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreeBodyTB.set_units" href="#ThreeBodyTB.set_units"><code>ThreeBodyTB.set_units</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function set_units(;energy=missing, length=missing, both=missing)</code></pre><p>Set global units for energy/length. Run with no arguments to check/return current units.</p><ul><li>Default units are <code>&quot;eV&quot;</code> and <code>&quot;Angstrom&quot;</code> (or <code>&quot;Å&quot;</code> or <code>&quot;Ang&quot;</code> ).</li><li>Choose atomic units by setting <code>energy=&quot;Ryd&quot;</code> and <code>length=&quot;Bohr&quot;</code>.</li><li>Set both at the same time with <code>both=&quot;atomic&quot;</code> or <code>both=&quot;eVAng&quot;</code></li><li>Internally, all units are atomic. Only main public facing functions actually change units.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/ThreeBodyTB.jl#L136-L145">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreeBodyTB.TB.Hk" href="#ThreeBodyTB.TB.Hk"><code>ThreeBodyTB.TB.Hk</code></a> — <span class="docstring-category">Function</span></header><section><div><p>function Hk(h::tb<em>crys</em>kspace, kpoint)</p><p>Calculate band structure at a k-point from a <code>tb_crys_kspace</code> object. Note, can only return precalculated k-points. Need real-space version to get arbitrary k-points.</p><p>#Returns</p><ul><li><code>vect</code> - Eigenvectors num<em>wan × num</em>wan complex matrix at kpoint</li><li><code>vals</code> - Eigenvalues (num_wan)</li><li><code>hk</code> - Hamiltonian at kpoint</li><li><code>sk</code> - Overlap matrix at kpoint</li><li><code>vals0</code> - &lt;vect | Hk0 | vect&gt; where Hk0 is the non-scf part of the Hamiltonian.</li></ul><p>#Arguments</p><ul><li><code>h::tb_crys_kspace</code> - tb<em>crys</em>kspace object</li><li><code>kpoint</code> - e.g. <code>[0.0,0.0,0.0]</code></li><li><code>scf=missing</code> - default is to take SCF from h.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/TB.jl#L1559-L1577">source</a></section><section><div><pre><code class="language-julia hljs">function Hk(h::tb_k, kpoint; scf=missing, spin=1)</code></pre><p>Calculate band structure at a k-point from <code>tb_k</code>. Must be pre-calculated k-point.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/TB.jl#L1584-L1588">source</a></section><section><div><pre><code class="language-julia hljs">function Hk(hk,sk, h::tb, kpoint; spin=1)</code></pre><p>Hk function with pre-allocated memory hk, sk</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/TB.jl#L1703-L1707">source</a></section><section><div><pre><code class="language-julia hljs">function Hk(h::tb, kpoint; spin=1)</code></pre><p>Calculate band structure at a k-point from <code>tb</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/TB.jl#L1991-L1995">source</a></section><section><div><pre><code class="language-julia hljs">function Hk(h::tb_crys, kpoint; spin=1)</code></pre><p>Calculate band structure at a k-point from <code>tb_crys</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/TB.jl#L2005-L2009">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreeBodyTB.TB.calc_bands" href="#ThreeBodyTB.TB.calc_bands"><code>ThreeBodyTB.TB.calc_bands</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function calc_bands(tbc::tb_crys, kpoints::Array{Float64,2}; spin=1)</code></pre><p>Calculate bandstructure for k-points from k-point array. Returns eigenvalues.</p><p><strong>Arguments</strong></p><ul><li><code>tbc::tb_crys</code> - The tight binding object</li><li><code>kpoints::Array{Float64,2}</code> - k-point array. e.g. <code>[0.0 0.0 0.0; 0.0 0.0 0.1]</code></li><li><code>spin::Int</code> - spin component (1 or 2) if magnetic, only 1 is non-sp.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/TB.jl#L1819-L1828">source</a></section><section><div><pre><code class="language-julia hljs">function calc_bands(h, kpoints::Array{Float64,2}; spin=1)</code></pre><p>Calculate bandstructure for k-points from k-point array. h is a <code>tb</code> or <code>tb_k</code> object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/TB.jl#L1844-L1848">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreeBodyTB.set_bin_dirs" href="#ThreeBodyTB.set_bin_dirs"><code>ThreeBodyTB.set_bin_dirs</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function set_bin_dirs(;qe=missing, mpi=missing, pseudodir=missing, templatedir=missing, wannier=missing)</code></pre><p>Set directories where things like quantum espresso bins are located. If run with everything missing, instead print current dirs.</p><ul><li><code>qe</code> - set bin directory of quantum espresso. Needs pw and pp installed. No useful default.</li><li><code>mpi</code> - set mpi command. something like &quot;mpirun -np &quot;</li><li><code>pseudo</code> - set directory for pseudopotentials. Default is to use ../pseudo/gbrv_pbesol/ as distributed with this code</li><li><code>template</code> - set directory for quantum espresso template files. Uses ../template_inputs/ by default.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/usnistgov/ThreeBodyTB.jl/blob/bf119cdb52de7004c70beb9d9b21e9cf3fcf648f/src/ThreeBodyTB.jl#L219-L229">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../structs/">« Structs</a><a class="docs-footer-nextpage" href="../compile/">Compile/Python »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Friday 1 March 2024 21:55">Friday 1 March 2024</span>. Using Julia version 1.9.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
